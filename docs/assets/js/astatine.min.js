/*
 	version: 1.1.7
 	title: astatine
 	author: alexander elias
 */
 (function(){function k(a){var b="",d=null;for(d in a)b=0<b.length?b+"&":b,b=b+encodeURIComponent(d)+"="+encodeURIComponent(a[d]);return b}function m(a){a=a.getElementsByTagName("*");for(var b={},d=0,n=a.length;d<n;d++){var c=a[d],g=c.name,f=c.type,e=c.value,k=c.checked,l=c.disabled,h=c.tagName.toLowerCase();if(("input"===h||"textarea"===h||"select"===h)&&g&&!l&&"submit"!==f&&"reset"!==f&&"button"!==f&&"file"!==f)if("checkbox"===f)b[g]=k;else if("radio"===f)k&&(b[g]=e);else if("select-one"===f||"select-multiple"===
 f){b[g]=[];f=0;for(e=c.selectedOptions.length;f<e;f++)b[g].push(c.selectedOptions[f].value);b[g]=b[g].join(", ")}else b[g]=e}return b}function p(a,b){var d="string"===typeof a?document.querySelector(a):a,c=document.createElement("div");c.classList.add("spinner");d.appendChild(c);d.addEventListener("submit",function(a){a.preventDefault();b(d,d.querySelector("[type=submit]"),c)})}function l(a){if(!a)throw Error("Astatine.ajax: requires options");if(!a.action)throw Error("Astatine.ajax: requires options.action");
 if(!a.method)throw Error("Astatine.ajax: requires options.method");if(!a.success)throw Error("Astatine.ajax: requires options.success");if(!a.error)throw Error("Astatine.ajax: requires options.error");a.headers||(a.headers={});if(a.data)if("GET"===a.method)a.action=a.action+"?"+k(a.data),a.data=null;else{switch(a.requestType){case "script":a.contentType=c.script;break;case "json":a.contentType=c.json;break;case "xml":a.contentType=c.xml;break;case "html":a.contentType=c.html;break;case "text":a.contentType=
 c.text;break;default:a.contentType=c.urlencoded}switch(a.responseType){case "script":a.accept=c.script;break;case "json":a.accept=c.json;break;case "xml":a.accept=c.xml;break;case "html":a.accept=c.html;break;case "text":a.accept=c.text}a.contentType===c.json&&(a.data=JSON.stringify(a.data));a.contentType===c.urlencoded&&(a.data=k(a.data))}var b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.action,!0,a.username,a.password);a.mimeType&&b.overrideMimeType(a.mimeType);a.withCredentials&&(b.withCredentials=
 a.withCredentials);a.accept&&(a.headers.Accept=a.accept);a.contentType&&(a.headers["Content-Type"]=a.contentType);if(a.headers)for(var d in a.headers)b.setRequestHeader(d,a.headers[d]);b.onreadystatechange=function(){if(4===b.readyState)return 200<=b.status&&400>b.status?a.success(b):a.error(b)};b.send(a.data)}function e(a){var b=document.head,d=b.querySelector("[title=Astatine]"),c=".spinner {margin: auto;display: none;width: "+a.thickness+";height: "+a.thickness+";border: solid "+
 a.size+" "+a.colorBottom+";border-top: solid "+a.size+" "+a.colorTop+";border-radius: 50%;animation: spin 2s linear infinite;-o-animation: spin 2s linear infinite;-ms-animation: spin 2s linear infinite;-moz-animation: spin 2s linear infinite;-webkit-animation: spin 2s linear infinite;}@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }@-o-keyframes spin { 0% { -o-transform: rotate(0deg); } 100% { -o-transform: rotate(360deg); } }@-ms-keyframes spin { 0% { -ms-transform: rotate(0deg); } 100% { -ms-transform: rotate(360deg); } }@-moz-keyframes spin { 0% { -moz-transform: rotate(0deg); } 100% { -moz-transform: rotate(360deg); } }@-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg); }100% { -webkit-transform: rotate(360deg); } }";
 a=document.createElement("style");c=document.createTextNode(c);a.setAttribute("title","Astatine");a.appendChild(c);d?b.replaceChild(a,d):document.head.appendChild(a)}var c={script:"text/javascript, application/javascript, application/x-javascript",json:"application/json, text/javascript",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",urlencoded:"application/x-www-form-urlencoded"},h={setup:{spinner:{s:"3px",t:"15px",ct:"darkgray",cb:"lightgray"}},ajax:l,submit:function(a){if(!a)throw Error("Astatine.submit: requires options");
 if(!a.query)throw Error("Astatine.submit: requires options.query");if(!a.complete)throw Error("Astatine.submit: requires options.complete");p(a.query,function(b,c,e){e&&(e.style.display="block");c&&(c.style.display="none");a.data=a.data||m(b);a.action=a.action||b.getAttribute("action");a.method=a.method||b.getAttribute("method");a.success=function(d){e&&(e.style.display="none");c&&(c.style.display="block");a.reset&&b.reset();a.complete(null,d)};a.error=function(b){e&&(e.style.display="none");c&&(c.style.display=
 "block");a.data=null;a.complete(b,null)};if(a.prepare){a.prepare=a.prepare.bind(a,a.data,function(b){a.data=b;l(a)},function(b){e&&(e.style.display="none");c&&(c.style.display="block");a.error(b)});var d=a.prepare();d&&(a.data=d,l(a))}})},formData:m,serialize:k};Object.defineProperties(h.setup.spinner,{size:{get:function(){return this.s},set:function(a){this.s=a;e(this)}},thickness:{get:function(){return this.t},set:function(a){this.t=a;e(this)}},colorTop:{get:function(){return this.ct},set:function(a){this.ct=
 a;e(this)}},colorBottom:{get:function(){return this.cb},set:function(a){this.cb=a;e(this)}}});window.At=h;window.Astatine=h;document.addEventListener("DOMContentLoaded",function(){e(window.Astatine.setup.spinner)})})();
